# V2 系统集成指南

## 只需要修改一个文件

打开 `src/index.ts`，将导入语句改一下：

### 修改前（V1）
```typescript
import { CalloutManager } from "./callout";
```

### 修改后（V2）
```typescript
import { CalloutManagerV2 } from "./callout";
```

### 修改类型声明
```typescript
// 修改前
private calloutManager: CalloutManager | null = null;

// 修改后
private calloutManager: CalloutManagerV2 | null = null;
```

### 初始化部分
```typescript
// 修改前
this.calloutManager = new CalloutManager(this);

// 修改后
this.calloutManager = new CalloutManagerV2(this);
```

## 完整修改步骤

1. **备份当前文件**（可选）
   ```bash
   cp src/index.ts src/index-v1-backup.ts
   ```

2. **修改 src/index.ts**
   
   只需要改 3 处地方：
   
   - 第 6 行：`import { CalloutManager }` → `import { CalloutManagerV2 }`
   - 第 17 行：`CalloutManager | null` → `CalloutManagerV2 | null`
   - 第 35 行：`new CalloutManager(this)` → `new CalloutManagerV2(this)`

3. **重新编译**
   ```bash
   npm run build
   # 或者开发模式
   npm run dev
   ```

4. **完成！**

## 就这么简单！

V2 系统已经完全封装好了，API 接口和 V1 保持一致，所以只需要改类名就行。

其他代码不用动，包括：
- ✅ 设置面板 - 不用改
- ✅ Dock 面板 - 不用改  
- ✅ 样式配置 - 不用改
- ✅ 主题系统 - 不用改

所有功能都能正常工作！

