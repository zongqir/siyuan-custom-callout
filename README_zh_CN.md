# 思源自定义引用块 (SiYuan Custom Callout)

[English](./README.md)

一个强大的思源笔记插件，让你的引用块焕然一新！将普通引用块转换为美观、实用的 Callout 提示块，功能丰富、高度可定制。

## ✨ 核心特性

- 🎨 **11种预设类型** - 涵盖各种使用场景的精美样式
- 🎭 **8种主题风格** - 从现代简约到霓虹发光，总有一款适合你
- 🛠️ **完全可自定义** - 创建你自己的Callout类型，自定义图标、颜色
- 📐 **智能边注系统** - 支持左右边注，可拖拽调整宽度
- ⚡ **三种创建方式** - 可视化菜单、命令输入、智能补全，任选其一
- 🎯 **丰富交互功能** - 折叠展开、类型切换、拖拽调整，一切尽在掌握
- 📱 **全平台支持** - 桌面端、移动端、浏览器，随处可用

---

## 📖 快速开始

### 安装插件

在思源笔记集市中搜索"Custom Callout"下载启用即可。

### 第一个 Callout

创建Callout有两种方式，选择你最喜欢的：

#### 方式一：可视化菜单（推荐）

1. 在笔记中输入 `>` 然后按空格，创建引用块
2. 等待 1-2 秒，会自动弹出精美的命令菜单
3. 使用**方向键**（↑↓←→）选择你想要的类型
4. 按 `Enter` 确认，开始输入内容


#### 方式二：快速过滤（推荐熟练用户）

1. 在笔记中输入 `>` 然后按空格，创建引用块
2. 等待菜单弹出后，**直接输入字母**进行过滤
3. 例如输入 `i` 会过滤出 `info`，输入 `tip` 会过滤出 `tip`
4. 方向键选择，`Enter` 确认

**支持中文搜索**：输入 `信` 会匹配"信息"、输入 `技` 会匹配"技巧"

---

## 🎯 11种预设类型

包含信息、概念、示例、技巧、最佳实践、权衡取舍、深水区、对比、总结、陷阱、亮点等类型，涵盖日常笔记的各种使用场景。

---

## 🎨 交互功能详解

### 1. 折叠与展开

**直接点击 Callout 标题**即可折叠或展开内容：

```
┌─────────────────────────┐
│ 💡 使用技巧             │ ← 点击标题折叠
├─────────────────────────┤
│ 这里是内容...            │
│ 可以有多行...            │
└─────────────────────────┘

       ↓ 折叠后 ↓

┌─────────────────────────┐
│ 💡 使用技巧             │ ← 再次点击展开
└─────────────────────────┘
```

**使用场景**：
- 整理长文档时临时隐藏部分内容
- 在演示时控制信息的渐进展示
- 节省屏幕空间，聚焦当前内容

### 2. 快速切换类型

点击 Callout **左侧的图标区域**（约40px宽）可以切换类型：

1. 点击图标区域
2. 弹出类型选择菜单
3. 选择新类型
4. 内容保持不变，样式立即更新

**使用场景**：
- 调整内容定位：把"信息"改为"技巧"
- 调整重要性：把"提示"改为"警告"
- 快速试验不同的视觉效果

### 3. 侧边调整大小

Callout 支持**拖拽调整宽度和高度**：

**调整宽度**：
1. 将鼠标移到 Callout **右侧边缘**
2. 会出现半透明的拖拽手柄
3. 点击并拖拽到合适的宽度
4. 松开鼠标，自动保存

**调整高度**：
1. 将鼠标移到 Callout **底部边缘**
2. 会出现半透明的拖拽手柄
3. 点击并拖拽到合适的高度
4. 松开鼠标，自动保存

**使用场景**：
- 根据内容调整合适的显示宽度
- 固定高度以保持页面布局整齐
- 在不同屏幕尺寸下优化显示效果

**实时反馈**：
- 拖拽时显示当前尺寸
- 成功后显示绿色提示通知
- 小屏幕设备上自动隐藏（避免误触）


---

## 🎨 8种主题风格

提供现代简约、卡片风格、扁平设计、经典传统、极简主义、毛玻璃、新拟态、霓虹发光等8种主题风格，满足不同审美需求。


---

## ⌨️ 键盘快捷键

### 命令菜单中

| 按键 | 功能 |
|------|------|
| `↑` `↓` `←` `→` | 在菜单项中导航 |
| `Enter` | 确认选择 |
| `ESC` | 关闭菜单 |
| 字母/数字键 | 激活过滤模式 |

### 过滤模式中

| 按键 | 功能 |
|------|------|
| 字母/数字键 | 添加过滤字符 |
| `Backspace` | 删除最后一个字符 |
| `ESC` | 退出过滤模式 |
| `↑` `↓` | 在过滤结果中导航 |
| `Enter` | 确认选择 |

### 自动补全中

| 按键 | 功能 |
|------|------|
| `@` | 触发自动补全 |
| `↑` `↓` | 上一个/下一个选项 |
| `Enter` | 确认选择 |
| `ESC` | 取消补全 |

---

## 💡 使用技巧

### 键盘快捷操作
1. 输入 `>` + `空格` 创建引用块
2. 使用方向键或字母过滤选择类型
3. `Enter` 确认，开始输入内容

### 批量转换
在普通引用块第一行添加命令（如 `info`），即可转换为 Callout。

### 尺寸调整
拖拽 Callout 的右侧或底部边缘可调整宽度和高度。

---

## ❓ 常见问题

### Q1: 为什么没有自动显示命令菜单？

**A**: 请检查：
- ✅ 引用块是否为空（没有任何内容）
- ✅ 是否等待了1-2秒（插件初始化时间）
- ✅ 插件是否已启用
- ✅ 是否在编辑模式（不是预览模式）

### Q2: 如何删除 Callout 样式，恢复普通引用块？

**A**: 两种方法：
1. 点击标题左侧图标，选择"原生样式"
2. 直接删除命令文本（如删除 `@info`）

### Q3: 自定义的类型和设置会丢失吗？

**A**: 不会！所有配置都保存在插件数据中，包括：
- 自定义类型
- 对预设类型的修改
- 隐藏的类型
- 显示顺序
- 主题选择
- 快捷配置

卸载前建议备份插件数据。

### Q4: 可以导出包含 Callout 的笔记吗？

**A**: 可以！Callout 样式在导出时会保留：
- ✅ 导出为 PDF - 完美保留样式
- ✅ 导出为 HTML - 保留样式
- ✅ 导出为 Markdown - 保留命令格式

### Q5: 拖拽调整在移动端如何工作？

**A**: 移动端会自动适配：
- 小屏幕设备上，拖拽手柄自动隐藏（避免误触）
- Callout 保持自适应宽度
- 所有其他功能正常使用

### Q6: 如何备份我的自定义配置？

**A**: 
1. 进入 `工作空间/data/storage/petal/siyuan-custom-callout/`
2. 复制配置文件（`callout-custom-config`）
3. 恢复时放回原位置即可

### Q7: 命令冲突怎么办？

**A**: 创建自定义类型时，系统会自动检查：
- ❌ 类型ID不能重复
- ❌ 命令不能重复（包括英文和中文）
- ✅ 如有冲突，会显示错误提示

### Q8: 可以在 Callout 中嵌套其他块吗？

**A**: 可以！Callout 内部可以包含：
- ✅ 列表（有序、无序、任务列表）
- ✅ 代码块
- ✅ 表格
- ✅ 图片
- ✅ 其他块级元素

### Q9: 主题风格影响所有Callout吗？

**A**: 是的！
- 主题风格：控制整体视觉样式（圆角、阴影、间距等）
- 类型设置：控制每个类型的颜色和图标
- 快捷配置：在主题基础上微调细节

切换主题，所有Callout立即应用新风格。

### Q10: 如何获取更多图标或颜色？

**A**: 当前版本提供：
- 70+ 精选图标（Heroicons 风格）
- 18 种预设配色方案
- 自定义颜色支持

如需更多选择，欢迎在 GitHub 提需求！

---

## 🔄 更新日志

### v0.4.1 (最新)
- ✨ 新增8种主题风格系统
- ✨ 新增主题快捷配置功能
- ✨ 新增拖拽调整宽度和高度功能
- ✨ 新增键盘过滤功能
- 🎨 优化命令菜单布局和样式
- 🐛 修复多个已知问题

### v0.4.0
- ✨ 新增完整的自定义功能（创建、编辑、删除类型）
- ✨ 新增70+图标库和18种配色方案
- ✨ 新增拖拽排序功能
- ✨ 新增隐藏/显示类型功能
- 🎨 全新设置面板UI

### v0.3.0
- ✨ 新增键盘过滤查找功能
- 🎨 优化命令菜单显示

### v0.2.0
- ✨ 新增折叠/展开功能
- ✨ 新增类型切换功能
- ✨ 新增拖拽调整尺寸功能

### v0.1.0
- 🎉 首次发布
- ✨ 11种预设Callout类型
- ✨ 自动命令菜单
- ✨ 手动命令输入

---

## 🤝 反馈与支持

### 遇到问题？

1. **查看文档**：先查看本README和项目中的说明文档
2. **提交Issue**：[GitHub Issues](https://github.com/zongqir/siyuan-custom-callout/issues)
3. **功能建议**：欢迎提出新想法！

### 支持项目

如果这个插件对你有帮助：

- ⭐ 在 GitHub 上给个 Star
- 📢 分享给其他思源用户
- 💬 在社区分享使用心得

### 参与贡献

欢迎贡献代码或文档！请查看 [贡献指南](CONTRIBUTING.md)（如果有）

---

## 💖 赞助支持

如果这个插件让你的笔记体验更好，欢迎请我喝杯咖啡！你的支持是我持续更新和维护的动力 ☕

<div align="center">
<img src="https://i0.hdslb.com/bfs/openplatform/3b4d37a5285096d3493d09ca88280d9acf90129e.png@1e_1c.webp" width="200" alt="赞助二维码"/>

**扫码支持 · 感谢有你！** 🙏

每一份支持都是对开源项目最大的鼓励！
</div>

---

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

## 🙏 致谢

- 感谢 [思源笔记](https://github.com/siyuan-note/siyuan) 提供的强大平台
- 图标来自 [Heroicons](https://heroicons.com/)

---

**让你的笔记更美观、更实用！** 🎉

如有问题或建议，欢迎在 [GitHub](https://github.com/zongqir/siyuan-custom-callout) 上反馈！
