# 思源自定义引用块 (SiYuan Custom Callout)

[English](./README.md)

一个强大的思源笔记插件，让你的引用块焕然一新！将普通引用块转换为美观、实用的 Callout 提示块，功能丰富、高度可定制。

## ✨ 核心特性

- 🎨 **11种预设类型** - 涵盖各种使用场景的精美样式
- 🎭 **8种主题风格** - 从现代简约到霓虹发光，总有一款适合你
- 🛠️ **完全可自定义** - 创建你自己的Callout类型，自定义图标、颜色
- 📐 **智能边注系统** - 支持左右边注，可拖拽调整宽度
- ⚡ **三种创建方式** - 可视化菜单、命令输入、智能补全，任选其一
- 🎯 **丰富交互功能** - 折叠展开、类型切换、拖拽调整，一切尽在掌握
- 📱 **全平台支持** - 桌面端、移动端、浏览器，随处可用

---

## 📖 快速开始

### 安装插件

1. 打开思源笔记
2. 进入 `设置` → `集市` → `插件`
3. 搜索 "Custom Callout" 或 "自定义引用块"
4. 点击下载并启用

### 第一个 Callout

创建Callout有两种方式，选择你最喜欢的：

#### 方式一：可视化菜单（推荐）

1. 在笔记中输入 `>` 然后按空格，创建引用块
2. 等待 1-2 秒，会自动弹出精美的命令菜单
3. 使用**方向键**（↑↓←→）选择你想要的类型
4. 按 `Enter` 确认，开始输入内容

![命令菜单示例](https://via.placeholder.com/600x300?text=Command+Menu)

#### 方式二：快速过滤（推荐熟练用户）

1. 在笔记中输入 `>` 然后按空格，创建引用块
2. 等待菜单弹出后，**直接输入字母**进行过滤
3. 例如输入 `i` 会过滤出 `info`，输入 `tip` 会过滤出 `tip`
4. 方向键选择，`Enter` 确认

**支持中文搜索**：输入 `信` 会匹配"信息"、输入 `技` 会匹配"技巧"

---

## 🎯 11种预设类型

| 命令 | 中文命令 | 类型名称 | 使用场景 | 颜色 |
|------|---------|---------|---------|------|
| `@info` | `@信息` | 信息说明 | 一般性信息、说明性内容 | 🔵 蓝色 |
| `@concept` | `@概念` | 概念解释 | 定义术语、解释概念 | 🟣 紫色 |
| `@example` | `@示例` | 示例演示 | 代码示例、使用案例 | 🟢 绿色 |
| `@tip` | `@技巧` | 使用技巧 | 实用技巧、小窍门 | 🟡 黄绿色 |
| `@best-practice` | `@最佳实践` | 最佳实践 | 推荐做法、行业标准 | 🌲 深绿色 |
| `@tradeoff` | `@权衡取舍` | 权衡取舍 | 利弊分析、选择对比 | 🟠 橙色 |
| `@deep-dive` | `@深水区` | 深水区 | 深入探讨、高级话题 | 🔵 深蓝色 |
| `@comparison` | `@对比` | 对比分析 | 对比不同方案 | 🟣 靛蓝色 |
| `@summary` | `@总结` | 章节总结 | 总结要点、归纳整理 | 🔷 青色 |
| `@pitfall` | `@陷阱` | 常见陷阱 | 警告、注意事项 | 🔴 红色 |
| `@highlight` | `@亮点` | 重要亮点 | 重点强调、核心内容 | 🟡 金黄色 |

---

## 🎨 交互功能详解

### 1. 折叠与展开

**直接点击 Callout 标题**即可折叠或展开内容：

```
┌─────────────────────────┐
│ 💡 使用技巧             │ ← 点击标题折叠
├─────────────────────────┤
│ 这里是内容...            │
│ 可以有多行...            │
└─────────────────────────┘

       ↓ 折叠后 ↓

┌─────────────────────────┐
│ 💡 使用技巧             │ ← 再次点击展开
└─────────────────────────┘
```

**使用场景**：
- 整理长文档时临时隐藏部分内容
- 在演示时控制信息的渐进展示
- 节省屏幕空间，聚焦当前内容

### 2. 快速切换类型

点击 Callout **左侧的图标区域**（约40px宽）可以切换类型：

1. 点击图标区域
2. 弹出类型选择菜单
3. 选择新类型
4. 内容保持不变，样式立即更新

**使用场景**：
- 调整内容定位：把"信息"改为"技巧"
- 调整重要性：把"提示"改为"警告"
- 快速试验不同的视觉效果

### 3. 侧边调整大小

Callout 支持**拖拽调整宽度和高度**：

**调整宽度**：
1. 将鼠标移到 Callout **右侧边缘**
2. 会出现半透明的拖拽手柄
3. 点击并拖拽到合适的宽度
4. 松开鼠标，自动保存

**调整高度**：
1. 将鼠标移到 Callout **底部边缘**
2. 会出现半透明的拖拽手柄
3. 点击并拖拽到合适的高度
4. 松开鼠标，自动保存

**使用场景**：
- 根据内容调整合适的显示宽度
- 固定高度以保持页面布局整齐
- 在不同屏幕尺寸下优化显示效果

**实时反馈**：
- 拖拽时显示当前尺寸
- 成功后显示绿色提示通知
- 小屏幕设备上自动隐藏（避免误触）


---

## 🎨 8种主题风格

点击顶栏的 Callout 图标，打开设置面板，在"🎨 整体风格"区域选择主题：

### 1. 现代简约（默认）
**特点**：简洁流畅，中等圆角，细边框，无阴影  
**适合**：日常使用，追求清爽简洁的风格

### 2. 卡片风格
**特点**：大圆角，带阴影，悬停抬起效果  
**适合**：需要层次感的笔记，视觉效果突出

### 3. 扁平设计
**特点**：纯色扁平，小圆角，粗左边框  
**适合**：简单直接的表达，重视信息本身

### 4. 经典传统
**特点**：无圆角，中等边框，稳重大气  
**适合**：正式文档、学术论文、严肃笔记

### 5. 极简主义
**特点**：极致简洁，细边框，小图标，紧凑布局  
**适合**：极简爱好者，追求信息密度

### 6. 毛玻璃
**特点**：半透明背景，模糊效果，现代科技感  
**适合**：追求现代设计，喜欢玻璃质感

### 7. 新拟态
**特点**：柔和的凸起或凹陷，双向阴影，立体质感  
**适合**：追求独特视觉体验，艺术感笔记

### 8. 霓虹发光
**特点**：鲜艳的发光边框，悬停缩放效果  
**适合**：需要醒目提示，重要内容强调

**切换方法**：
1. 打开设置面板
2. 点击任意主题卡片
3. 所有Callout立即应用新风格！

---

## 🛠️ 自定义功能

### 创建自己的Callout类型

1. **打开设置**：点击顶栏 Callout 图标
2. **新建类型**：点击右上角"新建类型"按钮
3. **填写信息**：
   - **类型ID**：唯一标识（如 `my-note`）
   - **显示名称**：显示在标题中的名字（如 `我的笔记`）
   - **命令**：触发命令（如 `@my-note`）
   - **中文命令**（可选）：中文别名（如 `@我的笔记`）
4. **选择图标**：从70+个图标中选择
5. **选择颜色**：从18种预设颜色中选择，或自定义
6. **保存**：点击保存按钮，立即生效！

### 编辑预设类型

不喜欢默认的图标或颜色？可以修改：

1. 在设置面板中找到要修改的类型
2. 点击右侧的"编辑"按钮（铅笔图标）
3. 修改图标或颜色
4. 保存

不满意？点击"重置"按钮恢复默认。

### 隐藏不需要的类型

如果某些预设类型用不到，可以隐藏：

1. 找到要隐藏的类型
2. 点击"隐藏"按钮（眼睛图标）
3. 该类型不再出现在命令菜单中

**注意**：
- 隐藏的类型在设置面板中仍然可见（半透明显示）
- 可以随时点击"显示"按钮恢复
- 隐藏不会影响已有的Callout显示

### 拖拽排序

想调整菜单中类型的显示顺序？直接拖拽：

1. 在设置面板中，点住任意类型卡片
2. 拖动到目标位置
3. 松开鼠标
4. 顺序自动保存，命令菜单立即生效

### 整体重置

如果想恢复到初始状态：

1. 点击右上角"整体重置"按钮
2. 确认操作
3. 所有自定义配置清空，恢复默认设置

**重置会清除**：
- 所有自定义类型
- 对预设类型的修改
- 隐藏的类型列表
- 自定义的显示顺序

**重置会保留**：
- 主题风格选择
- 网格列数设置

---

## 🎯 主题快捷配置

在"主题风格"标签页，可以微调当前主题的样式：

### 背景样式
- **纯色**：单一颜色背景
- **渐变**：渐变色背景（更有层次）

### 圆角大小
- 无圆角（0px）→ 超大圆角（20px）
- 7个级别可选

### 左侧条纹
- 无条纹（0px）→ 超粗条纹（6px）
- 左侧强调边框粗细

### 边框粗细
- 无边框（0px）→ 超粗边框（3px）

### 标题字体大小
- 极小（0.8em）→ 超大（1.2em）

### 标题字体粗细
- 正常（400）→ 特粗（800）

### 图标大小
- 小（14px）→ 特大（24px）

### 高级选项
- ☑️ **隐藏图标**：只显示文字标题
- ☑️ **隐藏标题文字**：只显示图标
- ☑️ 两者都选：完全隐藏标题，只保留内容

**使用建议**：
- 先选择一个接近的主题
- 再通过快捷配置微调细节
- 实时预览，所见即所得

---

## 📚 实用场景示例

### 场景1：技术文档

```markdown
> @concept
> REST API 是一种架构风格，用于设计网络应用程序。

> @example
> GET /api/users/123
> 返回ID为123的用户信息

> @best-practice
> 建议使用 HTTPS 协议保证数据传输安全

> @pitfall
> ⚠️ 不要在 URL 中传递敏感信息，使用请求体或请求头
```

### 场景2：学习笔记

```markdown
> @info
> 第三章：记忆与认知

> @concept
> 艾宾浩斯遗忘曲线：人们在学习后会快速遗忘，需要及时复习

> @tip
> 使用间隔重复法（Spaced Repetition）提高记忆效率

> @summary
> 本章要点：
> 1. 理解记忆的形成机制
> 2. 掌握科学的复习方法
> 3. 运用记忆技巧提升学习效率
```

### 场景3：项目文档

```markdown
> @info
> 项目使用 TypeScript + Svelte + Vite 开发

> @tradeoff
> 选择 Vite 而不是 Webpack：
> ✅ 优点：更快的热更新，更简洁的配置
> ❌ 缺点：某些老旧库可能不兼容

> @deep-dive
> 关于构建优化的深入分析：
> - 使用 Tree Shaking 减少打包体积
> - 启用代码分割提升加载速度
> - 优化静态资源的缓存策略
```

### 场景4：调整显示尺寸

创建 Callout 后，可以通过拖拽手柄调整宽度和高度，以适应不同的内容和布局需求。

```markdown
> @info
> 💡 这是一个可以调整大小的信息块
> 
> - 拖拽右侧边缘调整宽度
> - 拖拽底部边缘调整高度
> - 尺寸会自动保存
```

---

## ⌨️ 键盘快捷键

### 命令菜单中

| 按键 | 功能 |
|------|------|
| `↑` `↓` `←` `→` | 在菜单项中导航 |
| `Enter` | 确认选择 |
| `ESC` | 关闭菜单 |
| 字母/数字键 | 激活过滤模式 |

### 过滤模式中

| 按键 | 功能 |
|------|------|
| 字母/数字键 | 添加过滤字符 |
| `Backspace` | 删除最后一个字符 |
| `ESC` | 退出过滤模式 |
| `↑` `↓` | 在过滤结果中导航 |
| `Enter` | 确认选择 |

### 自动补全中

| 按键 | 功能 |
|------|------|
| `@` | 触发自动补全 |
| `↑` `↓` | 上一个/下一个选项 |
| `Enter` | 确认选择 |
| `ESC` | 取消补全 |

---

## 💡 使用技巧

### 技巧1：键盘流快速创建

1. 输入 `>` + `空格` 创建引用块
2. 等待菜单出现（或输入 `@` 触发补全）
3. 输入首字母快速过滤（如 `i` 匹配 info）
4. `Enter` 确认
5. 开始输入内容

全程无需鼠标，效率极高！

### 技巧2：批量修改已有内容

如果你有很多普通引用块，想转换为 Callout：

1. 在每个引用块第一行添加命令（如 `@info`）
2. 按 `Enter`，自动应用样式
3. 或者使用"查找替换"功能批量添加命令

### 技巧3：组合使用不同类型

在同一篇文档中组合使用多种类型，让内容层次分明：

```markdown
> @info
> 基本信息...

> @concept
> 核心概念...

> @example
> 实际案例...

> @tip
> 实用技巧...

> @pitfall
> 注意事项...

> @summary
> 总结要点...
```

### 技巧4：调整尺寸优化布局

根据内容长度调整 Callout 的显示尺寸：

```markdown
> @info
> 💭 我的思考：
> 这个观点很有启发...
> （拖拽右侧或底部边缘调整大小）

> @highlight
> ⭐ 重点标记
> 需要重点复习
> （可以固定宽度或高度）
```

### 技巧5：自定义专属类型

为特定用途创建专属类型：

- `@todo` - 待办事项（使用剪贴板图标+橙色）
- `@question` - 疑问记录（使用问号图标+紫色）
- `@inspiration` - 灵感闪现（使用灯泡图标+黄色）
- `@reference` - 参考资料（使用书签图标+蓝色）

### 技巧6：利用主题切换氛围

- 白天工作：使用"现代简约"或"扁平设计"
- 晚上阅读：使用"极简主义"或"经典传统"
- 演示展示：使用"卡片风格"或"毛玻璃"
- 重点突出：使用"霓虹发光"

一键切换，整体风格立即改变！

---

## ❓ 常见问题

### Q1: 为什么没有自动显示命令菜单？

**A**: 请检查：
- ✅ 引用块是否为空（没有任何内容）
- ✅ 是否等待了1-2秒（插件初始化时间）
- ✅ 插件是否已启用
- ✅ 是否在编辑模式（不是预览模式）

### Q2: 如何删除 Callout 样式，恢复普通引用块？

**A**: 两种方法：
1. 点击标题左侧图标，选择"原生样式"
2. 直接删除命令文本（如删除 `@info`）

### Q3: 自定义的类型和设置会丢失吗？

**A**: 不会！所有配置都保存在插件数据中，包括：
- 自定义类型
- 对预设类型的修改
- 隐藏的类型
- 显示顺序
- 主题选择
- 快捷配置

卸载前建议备份插件数据。

### Q4: 可以导出包含 Callout 的笔记吗？

**A**: 可以！Callout 样式在导出时会保留：
- ✅ 导出为 PDF - 完美保留样式
- ✅ 导出为 HTML - 保留样式
- ✅ 导出为 Markdown - 保留命令格式

### Q5: 拖拽调整在移动端如何工作？

**A**: 移动端会自动适配：
- 小屏幕设备上，拖拽手柄自动隐藏（避免误触）
- Callout 保持自适应宽度
- 所有其他功能正常使用

### Q6: 如何备份我的自定义配置？

**A**: 
1. 进入 `工作空间/data/storage/petal/siyuan-custom-callout/`
2. 复制配置文件（`callout-custom-config`）
3. 恢复时放回原位置即可

### Q7: 命令冲突怎么办？

**A**: 创建自定义类型时，系统会自动检查：
- ❌ 类型ID不能重复
- ❌ 命令不能重复（包括英文和中文）
- ✅ 如有冲突，会显示错误提示

### Q8: 可以在 Callout 中嵌套其他块吗？

**A**: 可以！Callout 内部可以包含：
- ✅ 列表（有序、无序、任务列表）
- ✅ 代码块
- ✅ 表格
- ✅ 图片
- ✅ 其他块级元素

### Q9: 主题风格影响所有Callout吗？

**A**: 是的！
- 主题风格：控制整体视觉样式（圆角、阴影、间距等）
- 类型设置：控制每个类型的颜色和图标
- 快捷配置：在主题基础上微调细节

切换主题，所有Callout立即应用新风格。

### Q10: 如何获取更多图标或颜色？

**A**: 当前版本提供：
- 70+ 精选图标（Heroicons 风格）
- 18 种预设配色方案
- 自定义颜色支持

如需更多选择，欢迎在 GitHub 提需求！

---

## 🔄 更新日志

### v0.4.1 (最新)
- ✨ 新增8种主题风格系统
- ✨ 新增主题快捷配置功能
- ✨ 新增拖拽调整宽度和高度功能
- ✨ 新增键盘过滤功能
- 🎨 优化命令菜单布局和样式
- 🐛 修复多个已知问题

### v0.4.0
- ✨ 新增完整的自定义功能（创建、编辑、删除类型）
- ✨ 新增70+图标库和18种配色方案
- ✨ 新增拖拽排序功能
- ✨ 新增隐藏/显示类型功能
- 🎨 全新设置面板UI

### v0.3.0
- ✨ 新增键盘过滤查找功能
- 🎨 优化命令菜单显示

### v0.2.0
- ✨ 新增折叠/展开功能
- ✨ 新增类型切换功能
- ✨ 新增拖拽调整尺寸功能

### v0.1.0
- 🎉 首次发布
- ✨ 11种预设Callout类型
- ✨ 自动命令菜单
- ✨ 手动命令输入

---

## 🤝 反馈与支持

### 遇到问题？

1. **查看文档**：先查看本README和项目中的说明文档
2. **提交Issue**：[GitHub Issues](https://github.com/zongqir/siyuan-custom-callout/issues)
3. **功能建议**：欢迎提出新想法！

### 支持项目

如果这个插件对你有帮助：

- ⭐ 在 GitHub 上给个 Star
- 📢 分享给其他思源用户
- 💬 在社区分享使用心得

### 参与贡献

欢迎贡献代码或文档！请查看 [贡献指南](CONTRIBUTING.md)（如果有）

---

## 💖 赞助支持

如果这个插件让你的笔记体验更好，欢迎请我喝杯咖啡！你的支持是我持续更新和维护的动力 ☕

<div align="center">
<img src="https://i0.hdslb.com/bfs/openplatform/3b4d37a5285096d3493d09ca88280d9acf90129e.png@1e_1c.webp" width="200" alt="赞助二维码"/>

**扫码支持 · 感谢有你！** 🙏

每一份支持都是对开源项目最大的鼓励！
</div>

---

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

## 🙏 致谢

- 感谢 [思源笔记](https://github.com/siyuan-note/siyuan) 提供的强大平台
- 图标来自 [Heroicons](https://heroicons.com/)

---

**让你的笔记更美观、更实用！** 🎉

如有问题或建议，欢迎在 [GitHub](https://github.com/zongqir/siyuan-custom-callout) 上反馈！
