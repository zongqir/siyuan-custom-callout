# 🎉 标准化 Callout 格式完成！

我已经将 Callout 格式完全改成了**标准化格式**！

## ✨ 格式变化对比

### **之前的格式**
```markdown
> @info
> 信息内容

> @info|left|30%|1em
> 左侧边注内容
```

### **现在的格式**（标准化！）
```markdown
> [!info]
> 信息内容

> [!info|left]
> 左侧边注内容
```

## 🎯 完成的修改

### **1. 核心解析逻辑** (`processor.ts`)
- ✅ 修改 `parseCalloutCommand` 方法支持 `[!info|left|30%|2em]` 格式
- ✅ 使用正则表达式 `/^\[!([^|\]]+)(\|.*?)?\]$/` 精确匹配
- ✅ 保持向后兼容性和参数解析功能

### **2. 菜单命令生成** (`menu.ts`)
- ✅ 修改边注设置中的命令生成逻辑
- ✅ 生成 `[!info|left]` 格式的新命令
- ✅ 更新过滤功能中的前缀从 `@` 改为 `[!`

### **3. 类型配置更新** (`types.ts`)
- ✅ 将所有 11 种类型的 `command` 从 `@xxx` 改为 `[!xxx]`
- ✅ 将所有中文命令从 `@信息` 改为 `[!信息]`
- ✅ 保持所有其他配置（颜色、图标等）不变

### **4. 过滤功能适配** (`menu.ts`)
- ✅ 更新过滤显示前缀从 `@` 改为 `[!`
- ✅ 修改过滤匹配逻辑，去除 `[!` 和 `]` 进行匹配
- ✅ 保持键盘过滤功能完整性

## 🚀 用户体验保持不变

### **面板操作完全一样**
- 用户依然通过面板选择 Callout 类型
- 键盘过滤功能正常工作（输入 `info` 过滤信息类型）
- 边注设置通过底部工具栏操作

### **手写命令兼容性**
- 支持手写 `[!info]` 基础格式
- 支持手写 `[!info|left]` 边注格式
- 支持手写 `[!info|left|30%|1em]` 完整参数格式

## 🌟 标准化优势

### **跨平台兼容**
```markdown
# 在 SiYuan 中
> [!info]
> 这是信息说明

# 复制到其他笔记应用
> [!info]  
> 这是信息说明  ✅ 完美显示！
```

### **生态系统支持**
- ✅ 符合主流笔记应用的格式标准
- ✅ 便于内容迁移和分享
- ✅ 广泛的生态支持

### **边注扩展保持兼容**
```markdown
# 在 SiYuan 中（边注功能）
> [!info|left]
> 左侧边注内容

# 在其他应用中（忽略不认识的参数）
> [!info]  
> 左侧边注内容  ✅ 显示为普通 info callout
```

## 📝 新的语法规范

### **基础格式**
```markdown
> [!info]           # 信息说明
> [!concept]        # 概念解释  
> [!example]        # 示例演示
> [!tip]            # 使用技巧
> [!best-practice]  # 最佳实践
> [!tradeoff]       # 权衡取舍
> [!deep-dive]      # 深水区
> [!comparison]     # 对比分析
> [!summary]        # 章节总结
> [!pitfall]        # 常见陷阱
> [!highlight]      # 重要亮点
```

### **边注扩展格式**
```markdown
> [!info|left]               # 左侧边注（默认 30% 宽度）
> [!info|right]              # 右侧边注（默认 30% 宽度）
> [!info|left|25%|2em]       # 左侧边注（自定义宽度和间距）
```

### **中文命令支持**
```markdown
> [!信息]           # 等同于 [!info]
> [!概念]           # 等同于 [!concept]
> [!示例]           # 等同于 [!example]
# ... 其他中文命令
```

## 🎯 测试建议

### **基础功能测试**
1. 创建引述块，选择不同类型的 Callout
2. 使用键盘过滤功能（输入 `info`、`tip` 等）
3. 测试中文命令过滤

### **边注功能测试**  
1. 创建 Callout 后点击图标编辑
2. 在底部工具栏选择左侧/右侧边注
3. 验证生成的命令格式是否正确

### **兼容性测试**
1. 手写 `[!info]` 验证是否正确渲染
2. 手写 `[!info|left]` 验证边注是否生效
3. 复制内容到其他笔记应用验证兼容性

## 🎊 总结

现在你的 Callout 插件已经完全**标准化**了！

- ✅ **格式标准** - 符合主流笔记应用的规范
- ✅ **功能完整** - 保持所有原有功能和边注扩展
- ✅ **体验不变** - 用户操作方式完全一样  
- ✅ **生态兼容** - 可以在各种工具间自由迁移

标准化确实是长远发展的关键。现在既保持了功能的独特性，又获得了生态的兼容性！🚀
