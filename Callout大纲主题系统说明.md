# 🎨 Callout 大纲主题系统

## 功能简介

现在你可以为 Callout 大纲面板选择不同的视觉风格！独立于 Callout 本身的主题，大纲面板拥有自己的主题系统，可以一键切换整体外观。

## 🌈 5 种预设主题

### 1️⃣ 现代毛玻璃（默认）
- **风格**：毛玻璃背景效果，现代化设计
- **特点**：半透明背景、模糊效果、优雅阴影
- **适合**：现代应用、Mac风格界面

### 2️⃣ 卡片风格
- **风格**：带阴影的卡片设计
- **特点**：纯白背景、明显阴影、大圆角
- **适合**：现代应用、产品文档、重要内容展示

### 3️⃣ 扁平设计
- **风格**：纯色扁平风格
- **特点**：无阴影、清晰边框、小圆角
- **适合**：简洁界面、极简设计、快速浏览

### 4️⃣ 极简主义
- **风格**：极致简洁，紧凑布局
- **特点**：最小化元素、细线边框、小字体
- **适合**：信息密集、专业工具、代码编辑器风格

### 5️⃣ 暗黑主题
- **风格**：深色配色，护眼舒适
- **特点**：深色背景、柔和对比度、夜间友好
- **适合**：夜间工作、暗色主题界面、护眼需求

## 🎯 如何使用

1. **打开设置**
   - 点击思源顶栏的 Callout 图标
   - 或通过插件设置打开

2. **选择大纲主题**
   - 在"🎨 大纲风格"区域
   - 点击任意主题卡片
   - 即时切换，立即生效！

3. **查看效果**
   - 设置面板下方会实时预览
   - 回到思源侧栏查看大纲面板的新样式

## 💡 技术细节

### 主题系统架构

```
src/dock/themes/
├── types.ts          # 主题接口定义
├── modern.ts         # 现代毛玻璃主题
├── card.ts           # 卡片风格主题
├── flat.ts           # 扁平设计主题
├── minimal.ts        # 极简主义主题
├── dark.ts           # 暗黑主题
├── utils.ts          # 主题工具函数
└── index.ts          # 主题导出
```

### 主题参数分类

大纲主题包含以下样式参数：

- **容器样式**：背景、模糊效果
- **头部样式**：背景、边框、内边距、标题样式
- **按钮样式**：背景、边框、圆角、悬停效果
- **列表样式**：背景、内边距、间距
- **滚动条样式**：宽度、轨道、滑块颜色
- **卡片样式**：圆角、内边距、边框、过渡动画
- **图标样式**：大小、滤镜效果
- **标签样式**：内边距、圆角、字体、颜色
- **文字样式**：标题和内容的字体、颜色、行高
- **脚部样式**：边框、透明度、图标效果
- **状态样式**：加载和空状态的颜色

### CSS 变量系统

所有主题使用 CSS 变量实现，支持动态切换：

```css
--outline-container-bg           /* 容器背景 */
--outline-header-bg             /* 头部背景 */
--outline-card-radius           /* 卡片圆角 */
--outline-icon-size             /* 图标大小 */
/* ... 50+ 个变量 */
```

### 数据存储

- 大纲主题选择保存在配置文件：`outlineThemeId: 'modern'`
- 独立于 Callout 主题系统
- 重置配置时会保留主题设置
- 切换主题立即生效，无需刷新

## 🔄 与 Callout 主题的关系

- **Callout 主题**：控制编辑器中 Callout 块的样式（圆角、阴影、间距等）
- **大纲主题**：控制侧栏大纲面板的样式（背景、布局、颜色等）
- **完全独立**：可以分别选择不同的主题组合
- **完美配合**：两套主题系统可以混搭使用

## 🎨 自定义主题

如果你想创建自己的大纲主题：

1. **复制现有主题**：选择最接近的主题文件作为模板
2. **修改参数**：调整颜色、大小、间距等参数
3. **导入系统**：将新主题添加到 `OUTLINE_THEME_STYLES` 数组
4. **测试预览**：在设置面板中测试新主题效果

### 主题开发示例

```typescript
export const myCustomTheme: OutlineThemeStyle = {
    id: 'my-theme',
    name: '我的主题',
    description: '自定义主题描述',
    preview: '🎨',
    
    // 容器样式
    containerBackground: '#f0f0f0',
    containerBackdropFilter: 'none',
    
    // 头部样式
    headerBackground: '#ffffff',
    headerPadding: '16px 20px',
    headerTitleColor: '#333333',
    
    // ... 更多样式参数
};
```

## 📋 配置示例

```json
{
  "version": "1.0.0",
  "customTypes": [],
  "themeId": "modern",          // Callout 主题
  "outlineThemeId": "card",     // 大纲主题（新增）
  "gridColumns": 3
}
```

## 🚀 未来计划

- [ ] 支持用户在界面中创建自定义主题
- [ ] 导入/导出大纲主题配置
- [ ] 主题市场（分享大纲主题设计）
- [ ] 跟随系统深色模式自动切换
- [ ] 更多预设主题（玻璃拟态、赛博朋克等）

---

**试试看吧！** 打开设置 → 在"🎨 大纲风格"区选择你喜欢的主题 → 立即体验不同的大纲视觉风格！🎉

## 🔧 实现细节

### 主题应用机制

1. **配置加载**：启动时从配置文件加载 `outlineThemeId`
2. **主题解析**：根据ID从主题数组中找到对应主题对象
3. **CSS生成**：将主题对象转换为CSS变量字符串
4. **样式注入**：通过 `style` 属性将CSS变量注入到大纲组件
5. **实时更新**：配置变化时重新生成和应用样式

### 性能优化

- **懒加载**：主题模块使用动态导入
- **缓存机制**：生成的CSS变量会被缓存
- **最小重渲染**：只有主题变化时才重新生成样式
- **CSS变量**：利用浏览器原生CSS变量进行高效样式切换

这套主题系统为 Callout 大纲提供了极大的自定义灵活性，让用户可以根据个人喜好和使用场景选择最合适的视觉风格！
