# 思源自定义引用块 - 部署指南

## 快速开始

### 1. 安装依赖

```bash
pnpm install
```

> 如果没有安装 pnpm，先运行：`npm install -g pnpm`

### 2. 创建符号链接（推荐方式）

#### 方式A：自动检测（推荐）
```bash
# 确保思源笔记正在运行
pnpm run make-link
# 根据提示选择工作空间序号
```

#### 方式B：手动配置
编辑 `scripts/make_dev_link.js`，修改第 13 行：
```javascript
let targetDir = "C:/你的思源工作空间路径/data/plugins";
```
然后运行：
```bash
pnpm run make-link
```

#### 方式C：环境变量
设置环境变量 `SIYUAN_PLUGIN_DIR` 为 `工作空间/data/plugins`，然后运行：
```bash
pnpm run make-link
```

### 3. 启动开发模式

```bash
pnpm run dev
```

### 4. 在思源中启用插件

打开思源笔记 → 设置 → 集市 → 已下载 → 找到"思源自定义引用块"→ 启用

---

## 其他方式

### 直接编译安装

```bash
pnpm run make-install
```

### 打包发布

```bash
pnpm run build
```
会在当前目录生成 `package.zip`

---

## 常见问题

### Windows 符号链接权限问题

如果 `make-link` 失败，尝试：

**方法1：** 启用开发者模式
- 设置 → 更新和安全 → 开发者选项 → 开启开发者模式

**方法2：** 使用管理员权限脚本
```bash
pnpm run make-link-win
```

**方法3：** 以管理员身份运行终端
- 右键 Git Bash → 以管理员身份运行
- 运行 `pnpm run make-link`

