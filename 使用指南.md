# 思源自定义引述块 - 使用指南

## 快速开始

### 安装插件

1. 从思源笔记集市下载安装，或
2. 手动编译：
   ```bash
   pnpm install
   pnpm run build
   ```

### 创建你的第一个 Callout

1. 在思源笔记中创建一个引述块（输入 `>` 然后按空格）
2. 自动弹出的命令菜单中选择一个类型
3. 输入你的内容
4. 完成！

## 功能详解

### 自动命令菜单

当你创建一个新的引述块时，插件会自动显示一个漂亮的命令菜单：

- **键盘导航**：使用方向键（↑↓←→）在菜单中导航
- **Enter 确认**：按 Enter 键选择当前高亮的类型
- **ESC 关闭**：按 ESC 键关闭菜单
- **鼠标点击**：直接点击想要的类型

### 手动命令输入

如果你已经熟悉命令，可以直接输入：

```
> @info
> 这里输入你的内容
```

支持的所有命令：

| 英文命令 | 中文命令 | 显示名称 | 主题色 |
|---------|---------|---------|--------|
| @info | @信息 | 信息说明 | 蓝色 |
| @concept | @概念 | 概念解释 | 紫色 |
| @example | @示例 | 示例演示 | 绿色 |
| @tip | @技巧 | 使用技巧 | 黄绿色 |
| @best-practice | @最佳实践 | 最佳实践 | 深绿色 |
| @tradeoff | @权衡取舍 | 权衡取舍 | 橙色 |
| @deep-dive | @深水区 | 深水区 | 深蓝色 |
| @comparison | @对比 | 对比分析 | 靛蓝色 |
| @summary | @总结 | 章节总结 | 青色 |
| @pitfall | @陷阱 | 常见陷阱 | 红色 |
| @highlight | @亮点 | 重要亮点 | 金黄色 |

### 交互功能

#### 切换类型
点击 Callout 标题**左侧的图标区域**（约 40px 宽度）：
- 会弹出类型切换菜单
- 选择新的类型即可快速切换
- 内容保持不变

#### 折叠/展开
点击 Callout 标题的**文本区域**（图标右侧）：
- 切换折叠/展开状态
- 折叠后只显示标题
- 再次点击可展开

## 使用场景

### 1. 技术文档

```markdown
> @concept
> REST API 是一种架构风格...

> @example
> 这是一个 GET 请求的例子...

> @best-practice
> 建议使用 HTTPS 协议...

> @pitfall
> 注意避免在 URL 中传递敏感信息
```

### 2. 学习笔记

```markdown
> @summary
> 本章主要讲解了...

> @highlight
> 重点：记忆曲线理论...

> @tip
> 可以使用间隔重复法来提高记忆效率
```

### 3. 项目文档

```markdown
> @info
> 项目使用 TypeScript + Svelte 开发

> @tradeoff
> 选择 Vite 而不是 Webpack：
> 优点：更快的热更新
> 缺点：某些老旧库可能不兼容

> @deep-dive
> 关于构建优化的深入分析...
```

## 高级技巧

### 嵌套使用

Callout 内部可以包含其他块元素：

```markdown
> @example
> 这是一个示例
> 
> - 列表项 1
> - 列表项 2
> 
> ```javascript
> console.log('代码块');
> ```
```

### 组合使用

在同一个文档中组合使用多种类型：

```markdown
> @info
> 功能说明...

> @tip
> 使用技巧...

> @pitfall
> 常见错误...
```

## 设置面板

点击顶栏的 Callout 图标可以打开设置面板：

- **查看所有类型**：预览所有可用的 Callout 类型
- **查看示例**：每个类型都有实时预览
- **刷新功能**：点击"刷新所有 Callout"按钮可以重新处理页面中的所有 Callout

## 常见问题

### Q: 为什么没有自动显示菜单？

A: 确保：
1. 引述块是空的
2. 等待页面完全加载（插件有 2 秒的初始化时间）
3. 引述块没有其他自定义样式

### Q: 如何删除 Callout 样式？

A: 
1. 点击标题左侧图标，选择"原生样式"
2. 或者直接删除命令文本（如 `@info`）

### Q: 可以自定义颜色和图标吗？

A: 当前版本使用预设的 11 种样式。后续版本将支持用户自定义配置。

### Q: 支持导出吗？

A: 是的，Callout 样式会在导出时保留（PDF、HTML 等）。

## 开发者信息

- **GitHub**: https://github.com/siyuan-note/siyuan-custom-callout
- **作者**: frostime
- **许可**: MIT

## 更新日志

### v0.4.1
- 将代码片段功能集成为插件
- 支持 11 种预设 Callout 类型
- 自动命令菜单
- 折叠/展开功能
- 类型切换功能
- 设置面板

## 反馈与建议

如有问题或建议，请在 GitHub 提交 Issue：
https://github.com/siyuan-note/siyuan-custom-callout/issues

